<!DOCTYPE HTML><html lang="en"><head>    <meta charset="UTF-8">    <title>HTML5图片特效</title>    <script language="javascript" src="js/jquery.js"></script>    <script language="javascript" src="js/alloyimage.js"></script>    <script>        function postStr(){            //保存            //$(".save").click(function(){            //               var canvas = document.createElement("canvas");            //             var src = $("#yifu").attr("src");            //         src = canvas.toDataURL(src);            //           console.log(src);            //       });            //   return src;            //return "javaScript返回值啦";            return "str";        }    function useLocalPaths(src){        //console.log(src);        //alert(text3);        //alert(src);        //document.getElementById("test").value = src;        $("#yifu").attr({"src":"data:image/png;base64,"+src,"data-src":"data:image/png;base64,"+src});            }    useLocalPaths(src);        </script>    <style>        * {            margin: 0;            padding: 0;            border: 0;            font-size: 100%;            font: inherit;            vertical-align: baseline;        }        .container{            width:100%;            position: absolute;            top: 0;            right: 0;            bottom: 0;            left: 0;            font-family: "Microsoft Yahei";            color:#666;        }        .header{            height:45px;            line-height:45px;            position: relative;            border-bottom:1px solid #ddd;            text-align: center;        }        .close{            position: absolute;            left:45px;        }        .save{            position: absolute;            right:45px;        }        .content{            padding-right:306px;            position: absolute;            top:45px;            right:0;            bottom:0;            left:0;        }        .img-wrap{            width:100%;            height: 100%;            text-align: center;        }        .menu{            position: absolute;            top:0;            right:0;            padding:15px;            width:306px;            height: 100%;            border-left:1px solid #ddd;        }        .title{            height:35px;            line-height:35px;            position: relative;            text-align: center;        }        .title:before,.title:after{            content: "";            position: absolute;            top:18px;            width:55px;            height:1px;            background: #ddd;        }        .title:before{            left: 60px;        }        .title:after{            right: 60px;        }        #artwork {            width:300px;            -webkit-border-radius: 10px;            -moz-border-radius: 10px;            border-radius: 10px;            overflow: hidden;            margin: 50px auto 10px;        }        /*input {            width: 80px;            height: 30px;            line-height: 30px;            font-size: 14px;            font-family: '微软雅黑';            border: 1px solid #ccc;            background-color: #e3e3e3;            -webkit-border-radius: 2px;            -moz-border-radius: 2px;            border-radius: 2px;            display: inline-block;            color: #333;            text-align: center;            cursor: pointer;        }        input:hover {            border: 1px solid #777;            background-color:#999;            color:#fff;        }*/        .range-wrap{            margin: 10px;        }        input[type="range"] {            margin-top: 2px;            width: 100%;            height:5px;            -webkit-appearance: none;            border: 1px solid #ccc;            box-sizing: border-box;        }        input[type="range"]:focus {            outline: none;        }        input[type="range"]::-webkit-slider-thumb {            -webkit-appearance: none;            cursor: pointer;            height: 5px;            width: 9px;            transform: translateY(9px);            background: #8b8b8b;            position: relative;        }        input[type="range"]::-webkit-slider-thumb:before{            content: "";            position: absolute;            top:-4px;            left:1px;            transform: rotate(45deg);            width:7px;            height:7px;            background: #8b8b8b;        }        #hue{            background: -webkit-linear-gradient(left, #ff0000,#ee00ff, #0007ff,#00fffa, #00ff06, #faff00, #ff0600);        }        #saturation{            background: -webkit-linear-gradient(left, #ff0000,#fff);        }        #intensity{            background: -webkit-linear-gradient(left, #000,#fff);        }        #normal{            margin:40px auto;            width:145px;            height:30px;            line-height:30px;            background: #f6f6f6;            border:1px solid #ddd;            text-align: center;            border-radius:5px;        }    </style></head><body>    <div class="container">    <p style="z-index:1000;background:red;"><input id="test" value="" type="text"></p>    <div class="header">        改色        <button type="button" class="close">×</button>        <button type="button" class="save">保存</button>    </div>    <div class="content">        <div class="img-wrap">            <img src="" data-src="" id="yifu" />        </div>        <div class="menu">            <div class="basis">                <h4 class="title">基础</h4>                <div class="range-wrap"><p>色调:</p><input type="range"  min="-180" max="180" id="hue" /></div>                <div class="range-wrap"><p>饱和度:</p><input type="range"  min="-50" max="50" id="saturation" /></div>                <div class="range-wrap"><p>亮度:</p><input type="range"  min="-50" max="50" id="intensity" /></div>                <input type="button" value="确定" id="execute" />            </div>            <div class="filter">                <h4 class="title">滤镜</h4>                <div id="toReverse"><p><span class="square"></span> 互补色</p></div>                <div id="toThresh"><p><span class="square"></span> 黑白色</p><input type="range"  min="-50" max="50" /></div>                <div id="normal">原图</div>            </div>        </div>    </div></div><script>    function Model(model,arg2,arg3,arg4,arg5){        var pic = $("#yifu")[0];        pic.src = $("#yifu").attr("data-src");        console.log(pic.src);        if(arguments.length !=0 ){            var picTranseObj = AlloyImage(pic);            picTranseObj.act(model,arg2,arg3,arg4,arg5).replace(pic);        }    }    function changeModel(){        Model.apply(this,arguments);    }   /* //请求数据    function getImg(url){        $.get(url,function(src){            $("#yifu").attr({"src":src,"data-src":src});        });    }    //发送数据    function submitImg(url){        var canvas = document.createElement("canvas");        var src = $("#yifu").attr("src");        src = canvas.toDataURL(src);        console.log(src);        $.get(url,{src:src});    }*/    //调节色调/饱和度/亮度    $('#execute').click(function(){        var H = $("#hue").val(),            S = $("#saturation").val(),            I = $("#intensity").val();        changeModel("setHSI", H, S, I,true);    });    //调节灰度    $('#toGray').click(function(){        changeModel("toGray");    });    //反色    $('#toReverse').click(function(){        changeModel("toReverse");    });  /*  $('#toThresh').click(function(){        var thresh = $(this).find("input").val();        changeModel("toThresh",thresh);    });*/    //返回原图    $('#normal').click(function(){        changeModel();    });    $(".range-wrap input").on("input propertychange",function(){        var val = $(this).val();        $(this).siblings("span").text(val);    });</script></body></html>